---
date: 2024-06-27T17:49:29+08:00
title: "TS 装饰器"
---

## 装饰器介绍

在 TS 语法高级特性中，装饰器是一种特殊类型的声明，提供额外的特性来支持标注或修改类及其成员。

装饰器能够附件到类的本体、方法、属性、访问器或参数的声明上，在实现功能扩展或行为修改的同时能够保证不直接修改类本体。

TS 装饰器为类及其成员在元编程语法的基础上提供了添加标注的一种方式。

在使用装饰器时，采用 `@expression` 这种书写形式。语法中的表达式（Expression）求值后必须为一个函数，并且在运行函数时被调用，被装饰的声明信息作为参数传入。

> 若要在 TS 代码中启用实验性的装饰器特性，则必须在命令行终端或配置文件 tsconfig.json 中启用 experimentalDecorators 编译器选项。

在命令行终端中启用 experimentalDecorators 编译器选项的写法如下：

```sh
tsc --target ES5 --experimentalDecorators
```

在配置文件 tsconfig.json 中启用 experimentalDecorators 编译器选项的写法如下：

```json
{
  "compilerOptions": {
    "target": "ES5",
    "experimentalDecorators": true
  }
}
```

### 装饰器应用

- decorators-basic.ts

```ts
function HelloDecorator(target: any) {
  console.log("Hello, decorator!");
}
@HelloDecorator
class DecoratorBasic {}
```

通过附加到空类 DecoratorBasic 上的装饰器 `@HelloDecorator`，实现了在没有添加任何实际功能的类上，输出提示信息的功能。

### 类装饰器应用

通过类装饰器设计实现为类添加成员属性的应用

```ts
function AddAge(constructor: Function) {
  constructor.prototype.age = 26;
}

@AddAge
class DecoratorClass {
  name: string;
  constructor(name: string) {
    this.name = name;
  }
}

let dc = new DecoratorClass("king");
console.log(dc); // { name: "king" }
console.log(dc.age); // 26

dc.name = "tina";
dc.age = 18;

console.log(dc); // { name: "tina", age: 18 }
```

[未完]
