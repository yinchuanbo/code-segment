---
date: 2024-07-14T09:26:58+08:00
title: "Js æ€§èƒ½ä¼˜åŒ–å…¨å®¶æ¡¶ï¼š6 ä¸ªæ–¹é¢ 9 ç‚¹å»ºè®®"
---

## ğŸ› ï¸ å†…å­˜ç®¡ç†

é«˜æ•ˆçš„å†…å­˜ç®¡ç†æ˜¯ä¿è¯ JavaScript åº”ç”¨ç¨‹åºæ€§èƒ½çš„å…³é”®ã€‚å†…å­˜ç®¡ç†ä¸å–„ä¼šå¯¼è‡´å†…å­˜æ³„æ¼å’Œç¨‹åºå´©æºƒã€‚

### é¿å…ä½¿ç”¨å…¨å±€å˜é‡

å°½é‡å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œç¡®ä¿æ›´å¥½çš„å°è£…ã€‚

```js
(function () {
  const localVariable = "I am local";
  console.log(localVariable);
})();
```

### ä½¿ç”¨ WeakMap è¿›è¡Œç¼“å­˜

WeakMaps å…è®¸åœ¨ä¸é˜»æ­¢åƒåœ¾å›æ”¶çš„æƒ…å†µä¸‹ç¼“å­˜å¯¹è±¡ã€‚

```js
const cache = new WeakMap();

function process(data) {
  if (!cache.has(data)) {
    const result = expensiveComputation(data);
    cache.set(data, result);
  }
  return cache.get(data);
}

function expensiveComputation(data) {
  // Simulate expensive computation
  return data * 2;
}
```

## ğŸŒ ç”¨äºç¦»çº¿ç¼“å­˜çš„ Service Worker

Service Worker å¯ä»¥é€šè¿‡ç¼“å­˜èµ„æºå’Œå¯ç”¨ç¦»çº¿åŠŸèƒ½æ¥æ˜¾è‘—æé«˜æ€§èƒ½ã€‚

### å®ç° Basic Service Worker

è®¾ç½® Service Worker æ¥ç¼“å­˜èµ„æºã€‚

```js
// sw.js
self.addEventListener("install", (event) => {
  event.waitUntil(
    caches.open("v1").then((cache) => {
      return cache.addAll([
        "/index.html",
        "/styles.css",
        "/script.js",
        "/image.png",
      ]);
    })
  );
});

self.addEventListener("fetch", (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      return response || fetch(event.request);
    })
  );
});

// Register the Service Worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker
    .register("/sw.js")
    .then(() => console.log("Service Worker registered"))
    .catch((error) =>
      console.error("Service Worker registration failed", error)
    );
}
```

## ğŸ“Š ç”¨äºæ€§èƒ½å¯†é›†å‹ä»»åŠ¡çš„ WebAssembly

WebAssemblyï¼ˆWasmï¼‰ä½¿ç”¨äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼æ¥æ‰§è¡Œé«˜æ€§èƒ½ä»£ç ã€‚

### WebAssembly ç”¨äºç¹é‡çš„è®¡ç®—

å¯ä»¥å°†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å…³é”®éƒ¨åˆ†ç¼–è¯‘ä¸º WebAssemblyã€‚

```js
// C code (example.c)
#include <emscripten.h>

EMSCRIPTEN_KEEPALIVE
int add(int a, int b) {
    return a + b;
}

// Compile to WebAssembly
// emcc example.c -o example.js -s EXPORTED_FUNCTIONS="['_add']"

// JavaScript
fetch('example.wasm').then(response =>
    response.arrayBuffer()
).then(bytes =>
    WebAssembly.instantiate(bytes, {})
).then(results => {
    const add = results.instance.exports.add;
    console.log(add(2, 3)); // 5
});
```

## ğŸ›ï¸ ç”¨äºå¤šçº¿ç¨‹çš„ Web Worker

Web Workers å…è®¸åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬ï¼Œåœ¨ JavaScript ä¸­å¯ç”¨å¤šçº¿ç¨‹ã€‚

### å°†å¯†é›†å‹ä»»åŠ¡è½¬ç§»ç»™ Web Worker

å°†ç¹é‡çš„è®¡ç®—äº¤æ‰˜åˆ° Web Workerï¼Œä¿è¯èƒ½å¤ŸåŠæ—¶å“åº”ä¸»çº¿ç¨‹ï¼Œå¤ªå¦™äº†ã€‚

```js
// worker.js
self.onmessage = (event) => {
  const result = performHeavyComputation(event.data);
  self.postMessage(result);
};

function performHeavyComputation(data) {
  // Simulate heavy computation
  return data.split("").reverse().join("");
}

// main.js
const worker = new Worker("worker.js");

worker.postMessage("Hello, Web Worker!");

worker.onmessage = (event) => {
  console.log("Result from Worker:", event.data);
};
```

## ğŸš€ ä¼˜åŒ– React åº”ç”¨ç¨‹åº

React ä»¥å…¶å¼ºå¤§çš„åŠŸèƒ½è€Œè‘—ç§°ï¼Œä½†åœ¨å¤„ç†å¤§å‹åº”ç”¨æ—¶å¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†æä¾›æ— ç¼çš„ç”¨æˆ·ä½“éªŒï¼Œå¯¹ React æ€§èƒ½çš„ä¼˜åŒ–å˜å¾—å°¤ä¸ºå…³é”®ã€‚

### ä½¿ç”¨ React.memo å’Œ useMemo

React.memo å¯ä»¥é˜²æ­¢å¯¹å‡½æ•°ç»„ä»¶è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚

```jsx
const ExpensiveComponent = React.memo(({ data }) => {
  // Expensive operations here
  return <div>{data}</div>;
});
```

å¯¹äºå¼€é”€å¤§çš„è®¡ç®—ï¼Œé‚£å°±å¾—äº¤ç»™ useMemo äº†ã€‚

```jsx
const MyComponent = ({ items }) => {
  const total = useMemo(() => {
    return items.reduce((sum, item) => sum + item.value, 0);
  }, [items]);
  return <div>Total: {total}</div>;
};
```

### ä½¿ç”¨ React.lazy å’Œ Suspense è¿›è¡Œä»£ç æ‹†åˆ†

éå¸¸å»ºè®®å¤§å®¶æ‹†åˆ†ä»£ç ï¼Œç„¶ååœ¨éœ€è¦æ—¶å†å»åŠ è½½ç»„ä»¶ã€‚

```jsx
const LazyComponent = React.lazy(() => import("./LazyComponent"));
const MyComponent = () => (
  <React.Suspense fallback={<div>Loading...</div>}>
    <LazyComponent />
  </React.Suspense>
);
```

## âš™ï¸ ä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„

é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ä¼šå¯¹æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚

### ä½¿ç”¨ map å¿«é€ŸæŸ¥æ‰¾é”®å€¼

ä¸å¯¹è±¡ç›¸æ¯”ï¼Œmap å¯¹äºé¢‘ç¹çš„æ·»åŠ å’ŒæŸ¥æ‰¾æ›´å‹å¥½ã€‚

```js
const map = new Map();
map.set("key1", "value1");
console.log(map.get("key1")); // value1
```

### ä½¿ç”¨ set å¿«é€Ÿå­˜å‚¨å”¯ä¸€å€¼

set æä¾›äº†ä¸€ç§å­˜å‚¨å”¯ä¸€å€¼çš„é«˜æ€§èƒ½æ–¹å¼ã€‚Niceã€‚

```js
const set = new Set([1, 2, 3, 4, 4]);
console.log(set.has(4)); // true
console.log(set.size); // 4
```
